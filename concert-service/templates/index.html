{% extends "base.html" %}
{% block title %}Афиша концертов{% endblock %}
{% block content %}
<h1>Предстоящие концерты</h1>
<div class="concert-list">
    {% if concerts %}
        {% for concert in concerts %}
        <a href="{{ url_for('concert_detail', concert_id=concert.id) }}" class="concert-link">
            <img src="{{ concert.image_url or 'https://via.placeholder.com/300x180.png?text=No+Image' }}" alt="{{ concert.title }}">
            <div class="concert-card-content">
                <h3>{{ concert.title }}</h3>
                <p><strong>Дата:</strong> {{ concert.date }}</p>
                <p><strong>Артисты:</strong> 
                    {% if concert.artists %}
                        {% for artist in concert.artists %}
                            <a href="{{ url_for('artist_detail', artist_id=artist.id) }}">{{ artist.name }}</a>{% if not loop.last %}, {% endif %}
                        {% endfor %}
                    {% else %}
                        Не указаны
                    {% endif %}
                </p>
                <div class="buy-button-wrapper">
                    <button class="buy-button">Купить билеты</button>
                </div>
            </div>
        </a>
        {% endfor %}
    {% else %}
        <p>К сожалению, предстоящих концертов нет.</p>
    {% endif %}
</div>
<style>
    .concert-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
    .concert-card {
        border: 1px solid #ddd; border-radius: 8px; overflow: hidden; 
        background-color: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        transition: transform 0.2s;
        text-decoration: none; 
        color: inherit;
    }
    .concert-card:hover { transform: translateY(-5px); }
    .concert-link img {
        width: 100%;
        height: 200px; /* Фиксированная высота */
        object-fit: cover; /* Масштабирует изображение, сохраняя пропорции и обрезая лишнее */
        display: block;
    }
    .concert-card-content { padding: 15px; }
    .concert-card h3 { margin-top: 0; }
    .concert-card p { margin: 5px 0; color: #555; }
    .buy-button-wrapper { margin-top: 15px; text-align: center; }
    .buy-button { 
        background-color: #007bff; 
        color: white; 
        padding: 10px 20px; 
        border: none; 
        border-radius: 5px; 
        cursor: pointer; 
        font-size: 1em; 
        transition: background-color 0.2s;
    }
    .buy-button:hover { background-color: #0056b3; }
</style>
{% endblock %}
